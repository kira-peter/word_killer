# Change: Add Time Challenge Game Modes

## Why
为 Word Killer 打字游戏添加三个全新的时间挑战类游戏模式，丰富游戏玩法。这些模式面向不同类型的玩家：倒计时模式适合快节奏玩家追求高分、极速模式提供竞技性的速度挑战和记录追踪、节奏大师考验持续专注力和反应能力。这些模式将与现有的经典模式和句子模式形成互补，为用户提供更多元化的打字练习体验。

## What Changes
- **游戏模式扩展**: 添加三个新的游戏模式枚举值
  - `ModeCountdown`: 60秒倒计时模式
  - `ModeSpeedRun`: 25词极速挑战模式
  - `ModeRhythmMaster`: 节奏大师模式
- **倒计时模式 (Countdown Mode)**:
  - 60秒限时挑战，消除尽可能多的单词
  - 动态单词生成：剩余单词<10时自动补充20个新词
  - 时间<10秒时显示红色警告
  - 时间耗尽自动结束游戏
- **极速模式 (Speed Run)**:
  - 固定25个单词，追求最快完成时间
  - 毫秒级精度计时（MM:SS.mmm 格式）
  - 最佳记录本地持久化存储（JSON 文件）
  - 完成所有单词自动结束并更新记录
- **节奏大师模式 (Rhythm Master)**:
  - 每个单词必须在时间限制内完成
  - 初始时间限制：2.0秒/词
  - 难度递增机制：每完成10个单词，时间限制减少0.1秒（最小0.5秒）
  - 当前活动单词显示进度条（绿→黄→红）
  - 任何单词超时立即 Game Over
  - 动态单词生成（类似倒计时模式）
- **UI 渲染**:
  - 模式选择菜单扩展至5个选项
  - 为每个模式添加专属渲染函数
  - 倒计时器、进度条、速度指标等视觉元素
- **时间管理系统**:
  - 100ms tick 检查机制（CheckTimeouts 方法）
  - 各模式在 AddChar 和 TryEliminate 中的时间检查
  - 暂停/恢复时正确处理时间计算（复用现有统计系统）

这是全新功能，不涉及破坏性变更。现有的经典模式和句子模式保持不变。

## Impact
- **修改能力规范**:
  - `game-modes` - 添加三个新的时间挑战模式及其核心逻辑

- **受影响代码**:
  - `pkg/game/game.go` - 添加3个模式常量、8个新字段、3个启动函数、修改 AddChar/TryEliminate、添加 CheckTimeouts 方法（约150行新增代码）
  - `pkg/ui/styles.go` - 添加3个模式专属渲染函数（RenderCountdownGame, RenderSpeedRunGame, RenderRhythmMasterGame）和1个辅助函数（renderRhythmWordArea），修改模式选择菜单（约250行新增代码）
  - `cmd/word-killer/main.go` - 扩展 model 结构体、修改 tick 处理器、扩展模式选择逻辑、更新暂停/重启菜单、扩展 View 函数渲染、添加极速记录存储函数（约200行新增/修改代码）
  - `pkg/stats/statistics.go` - **无需修改**，完全复用现有统计系统

- **外部依赖**:
  - 无新增外部依赖
  - 本地文件：`speedrun_record.json`（极速模式最佳记录，程序自动创建）

- **测试影响**:
  - 需要为三个新模式添加单元测试
  - 需要测试模式切换、暂停/恢复、时间计算等边界情况
